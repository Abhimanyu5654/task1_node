<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task 1</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>

        $(document).ready(function () {

            $("#btn").click(function (event) {
                event.preventDefault(); // Prevent the form from refreshing the page

                $("div").html('');

                if ($("#fname").val() == "") {
                    $("#f").html('Please enter your first name...!');
                    $("#fname").val('');
                    $("#fname").focus();
                    return false;
                }
                // first name numaric Validation
                if ($.isNumeric($("#fname").val())) {
                    $("#f").html('Please enter Alphanumeric first name...!');
                    $("#fname").val('');
                    $("#fname").focus();
                    return false;
                }
                if ($("#fname").val().length < 3) {
                    $("#f").html('Please enter first name more than 3 letters...!');
                    $("#fname").val('');
                    $("#fname").focus();
                    return false;
                }

                // last name Validation
                if ($("#lname").val() == "") {
                    $("#l").html('Please enter your last name...!');
                    $("#lname").focus();
                    return false;
                }
                if ($.isNumeric($("#lname").val())) {
                    $("#l").html('Please enter alphanumeric last name...!');
                    $("#lname").val('');
                    $("#lname").focus();
                    return false;
                }
                if ($("#lname").val().length < 3) {
                    $("#l").html('Please enter last name more than 3 letters...!');
                    $("#lname").val('');
                    $("#lname").focus();
                    return false;
                }

                // mobile validation
                if ($("#mob").val() == "") {
                    $("#m").html('Please enter your mobile number...!');
                    $("#mob").focus();
                    return false;
                }
                if (!($("#mob").val().substring(0, 1).match("[6789]"))) {
                    $("#m").html('Number must start with 9, 8, 7, or 6...!');
                    $("#mob").val('');
                    $("#mob").focus();
                    return false;
                }
                if ($("#mob").val().length != 10) {
                    $("#m").html('Please enter a 10-digit number...!');
                    $("#mob").val('');
                    $("#mob").focus();
                    return false;
                }
                if (!$.isNumeric($("#mob").val())) {
                    $("#m").html('Please enter digits only...!');
                    $("#mob").val('');
                    $("#mob").focus();
                    return false;
                }

                // email validation
                if ($("#email").val() == "") {
                    $("#e").html('Please enter your Email id...!');
                    $("#email").focus();
                    $("#email").val('');
                    return false;
                }
                if (($("#email").val().lastIndexOf('.') - $("#email").val().indexOf('@') < 2) || $("#email").val().indexOf("@") < 1) {
                    $("#e").html('Please enter a valid Email id...!');
                    $("#email").focus();
                    $("#email").val('');
                    return false;
                }

                // address validation
                if ($("#address").val() == "") {
                    $("#a").html('Please enter your address...!');
                    $("#address").val('');
                    $("#address").focus();
                    return false;
                }
                // other validations
                // ...
                // password validation
                if ($("#pass").val() == "") {
                    $("#p").html('Please enter your password...!');
                    $("#pass").focus();
                    return false;
                }
                if (!($("#pass").val().match('[a-z]'))) {
                    $("#p").html('Please enter a lowercase letter...!');
                    $("#pass").val('');
                    $("#pass").focus();
                    return false;
                }
                if (!($("#pass").val().match('[A-Z]'))) {
                    $("#p").html('Please enter an uppercase letter...!');
                    $("#pass").val('');
                    $("#pass").focus();
                    return false;
                }
                if (!($("#pass").val().match('[0-9]'))) {
                    $("#p").html('Please enter a numeric value...!');
                    $("#pass").val('');
                    $("#pass").focus();
                    return false;
                }
                if (!($("#pass").val().match('[!@#$%^&]'))) {
                    $("#p").html('Please enter a special character...!');
                    $("#pass").val('');
                    $("#pass").focus();
                    return false;
                }
                if ($("#pass").val().length < 8) {
                    $("#p").html('Please enter more than 8 characters...!');
                    $("#pass").val('');
                    $("#pass").focus();
                    return false;
                }

                const f_data = {
                    fname: $('#fname').val(),
                    lname: $('#lname').val(),
                    mobile: $('#mob').val(),
                    email: $('#email').val(),
                    address: $('#address').val(),
                    street: $('#street').val(),
                    city: $('#city').val(),
                    state: $('#state').val(),
                    country: $('#country').val(),
                    login_id: $('#login').val(),
                    password: $('#pass').val()
                }

                $.ajax({
                    url: 'https://task1-node-2tqv.onrender.com/post',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(f_data),
                    success: function (response) {
                        alert('Data saved successfully!');
                    },
                    error: function (error) {
                        console.error('Error saving data:', error);
                    }
                });
            })

            // Show data
            $('#show_btn').on('click', function () {
                $.ajax({
                    url: 'https://task1-node-2tqv.onrender.com/get',
                    type: 'GET',
                    success: function (data) {
                        $('#data').empty();
                        data.forEach(item => {
                            $('#data').append('<li>' +
                                'Name: ' + item.fname + ' ' + item.lname +
                                '-:-:- Mobile: ' + item.mobile +
                                '-:-:- Email: ' + item.email +
                                '-:-:- Address: ' + item.address + ', ' + item.street + ', ' + item.city + ', ' + item.state + ', ' + item.country +
                                '-:-:- Login ID: ' + item.login_id +
                                '-:-:- Creation Time: ' + item.createdAt +
                                '-:-:- Last Updated On: ' + item.updatedAt +
                                '</li>'
                            );
                        })
                    }
                })
            })

        })

    </script>

</head>

<body>
    <form>
        <table align="center">
            <tr>
                <th colspan="2">Registration Form</th>
            </tr>
            <!-- Form fields -->
            <tr>
                <td>First name :</td>
                <td>
                    <input type="text" name="fname" id="fname">
                    <div style="color:red" id="f"></div>
                </td>
            </tr>
            <tr>
                <td>Last Name :</td>
                <td>
                    <input type="text" name="lname" id="lname">
                    <div style="color:red" id="l"></div>
                </td>
            </tr>
            <tr>
                <td>Mobile No :</td>
                <td>
                    <input type="text" name="mobile" id="mob">
                    <div style="color:red" id="m"></div>
                </td>
            </tr>
            <tr>
                <td>Email id :</td>
                <td>
                    <input type="text" name="email" id="email">
                    <div style="color:red" id="e"></div>
                </td>
            </tr>
            <!-- Other fields -->
            <tr>
                <td>Password :</td>
                <td>
                    <input type="password" name="password" id="pass">
                    <div style="color:red" id="p"></div>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <input type="submit" value="Submit" id="btn">
                </td>
            </tr>
        </table>
    </form>

    <hr>

    <div align="center">
        <h3>Fetching data Show :-</h3>
        <button type="button" id="show_btn">Show Data</button>
    </div>

    <div>
        <ul id="data"></ul>
    </div>
</body>

</html>